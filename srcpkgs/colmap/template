# Template file for 'colmap'
pkgname=colmap
version=3.8
revision=1
build_style=cmake
makedepends="boost-devel eigen flann-devel freeimage-devel metis-devel
 glog-devel gflags-devel sqlite-devel glew-devel qt5-devel cgal-devel
 ceres-solver-devel liblz4-devel"
short_desc="Structure-from-Motion (SfM) and Multi-View Stereo (MVS) pipeline"
maintainer="Adam Gausmann <adam@gaussian.dev>"
license="BSD-3-Clause"
homepage="https://demuc.de/colmap/"
changelog="https://github.com/colmap/colmap/raw/master/CHANGELOG.txt"
distfiles="https://github.com/colmap/colmap/archive/refs/tags/${version}.tar.gz"
checksum=02288f8f61692fe38049d65608ed832b31246e7792692376afb712fa4cef8775

post_install() {
	vlicense COPYING.txt
}

colmap-devel_package() {
	depends="${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove "usr/lib/colmap/*.a"
		vmove "usr/share/colmap/*.cmake"
		vmove "usr/share/colmap/cmake"
	}
}
